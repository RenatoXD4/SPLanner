<!-- Contenedor principal -->
<div class="bg-gradient-to-br from-gray-950 via-gray-900 to-gray-800 text-gray-200 flex min-h-screen font-sans">

  <!-- Sidebar -->
  <aside [ngClass]="{'w-64': mostrarSidebar, 'w-20': !mostrarSidebar}" 
         class="bg-gradient-to-b from-gray-900 via-gray-800 to-gray-950 flex flex-col p-6 shadow-2xl relative transition-all duration-500">

    <!-- Toggle Sidebar -->
    <button (click)="toggleSidebar()" 
            class="absolute top-4 -right-4 w-10 h-10 bg-gray-800 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-green-500 transition-colors duration-300 z-50">
      <span *ngIf="mostrarSidebar">&#10094;</span>
      <span *ngIf="!mostrarSidebar">&#10095;</span>
    </button>

    <!-- Logo -->
    <div class="flex items-center mb-10">
      <div class="flex items-center space-x-3">
        <div class="w-12 h-12 bg-gradient-to-tr from-green-400 via-blue-500 to-purple-500 rounded-full flex items-center justify-center text-2xl font-bold text-white shadow-lg">SP</div>
        <span *ngIf="mostrarSidebar" class="text-xl font-bold tracking-wide text-white drop-shadow-md">SPlanner</span>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 flex flex-col space-y-2 text-sm md:text-base">
      <a class="nav-link" title="Dashboard">
        <svg class="icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 3h18v18H3V3z"/></svg>
        <span *ngIf="mostrarSidebar" class="link-text">Dashboard</span>
      </a>
      <a class="nav-link" title="Proyectos">
        <svg class="icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
        <span *ngIf="mostrarSidebar" class="link-text">Proyectos</span>
      </a>
      <a class="nav-link" title="Tareas">
        <svg class="icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M5 13l4 4L19 7"/></svg>
        <span *ngIf="mostrarSidebar" class="link-text">Tareas</span>
      </a>
      <a class="nav-link" title="Clientes">
        <svg class="icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"/><path d="M6 20v-2c0-2.21 3.58-4 8-4s8 1.79 8 4v2"/></svg>
        <span *ngIf="mostrarSidebar" class="link-text">Clientes</span>
      </a>
      <a class="nav-link" title="Reportes">
        <svg class="icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M11 17l-5-5 1.414-1.414L11 14.172l7.586-7.586L20 8l-9 9z"/></svg>
        <span *ngIf="mostrarSidebar" class="link-text">Reportes</span>
      </a>
    </nav>

    <!-- Ajustes -->
    <div class="mt-auto pt-5 border-t border-gray-700">
      <button (click)="toggleAjustes()" class="ajustes-btn" title="Ajustes">
        <div class="flex items-center space-x-3">
          <svg class="icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path d="M12 1v2m0 18v2m11-11h-2M3 12H1m16.95 5.05l-1.414-1.414M5.464 5.464L4.05 4.05m0 15.9l1.414-1.414M18.536 5.464l1.414-1.414"/>
          </svg>
          <span *ngIf="mostrarSidebar" class="font-semibold text-white">Ajustes</span>
        </div>
        <span *ngIf="mostrarSidebar" class="ml-auto transition-transform duration-300" [ngClass]="{'rotate-180': mostrarAjustes}">&#9662;</span>
      </button>
      <div *ngIf="mostrarAjustes" class="mt-2 space-y-2">
        <a class="submenu-link" title="Perfil">Perfil</a>
        <a class="submenu-link" title="Tema">Tema</a>
        <a class="submenu-link" title="Cerrar sesión">Cerrar sesión</a>
      </div>
    </div>

    <!-- Footer -->
    <div class="mt-3 text-gray-400 text-xs text-center py-3">&copy; 2025 SPlanner</div>
  </aside>

  <!-- Contenido principal -->
  <div class="flex-1 flex flex-col">
    <!-- Header móvil -->
    <header class="flex items-center justify-between p-4 bg-gradient-to-r from-gray-800 to-gray-900 md:hidden shadow-lg">
      <h1 class="text-xl font-bold text-green-400 drop-shadow-md">SPlanner</h1>
      <button (click)="toggleSidebar()" class="text-gray-200 text-2xl hover:text-green-400 transition-colors">&equiv;</button>
    </header>

    <main class="flex-1 p-6 overflow-auto">
      <!-- Barra de acción -->
      <div class="flex flex-col md:flex-row items-center justify-between mb-8 space-y-3 md:space-y-0">
        <div class="flex items-center space-x-4">
          <button (click)="abrirModal()" class="btn-nuevo-proyecto">
            <span class="text-2xl">+</span>
            <span>Nuevo Proyecto</span>
          </button>
          <input type="text" placeholder="Buscar proyectos..." [(ngModel)]="filtroTexto" class="input-busqueda">
        </div>
      </div>

      <!-- Tabla de proyectos -->
      <div class="bg-gray-850 rounded-3xl overflow-hidden shadow-xl">
        <table class="w-full table-auto border-collapse text-center text-sm md:text-base">
          <thead class="bg-gray-800 text-gray-300 uppercase text-xs tracking-wider">
            <tr>
              <th class="px-4 py-3">Nombre</th>
              <th class="px-4 py-3">Descripción</th>
              <th class="px-4 py-3">Fecha creación</th>
              <th class="px-4 py-3">Creado por</th>
              <th class="px-4 py-3">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of proyectosFiltrados" class="hover:bg-gray-700 cursor-pointer transition-all duration-200">
              <td class="px-4 py-2 text-white font-semibold">{{ p.nombre }}</td>
              <!-- Descripción truncada si es muy larga -->
              <td class="px-4 py-2 text-gray-200 overflow-hidden whitespace-nowrap text-ellipsis max-w-xs" title="{{ p.descripcion }}">
                {{ p.descripcion }}
              </td>
              <td class="px-4 py-2 text-gray-300">{{ p.createdAt | date:'short' }}</td>
              <td class="px-4 py-2 text-gray-300">{{ p.creadoPor?.nombre }}</td>
              <td class="px-4 py-2 flex justify-center space-x-2">
                <button (click)="editarProyecto(p)" class="btn-editar">Editar</button>
                <button (click)="confirmarEliminar(p)" class="btn-eliminar">Eliminar</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>

</div>

<!-- Tailwind clases personalizadas en tu CSS o style global -->
<style>
  .nav-link { @apply flex items-center px-4 py-3 rounded-xl bg-gray-800 hover:bg-gradient-to-r shadow-md transition-all duration-300 cursor-pointer; }
  .icon { @apply w-6 h-6 text-white flex-shrink-0; }
  .link-text { @apply ml-3 font-semibold text-white; }
  .ajustes-btn { @apply group w-full flex items-center px-4 py-3 rounded-xl bg-gray-800 hover:bg-gradient-to-r shadow-md transition-all duration-300 cursor-pointer; }
  .submenu-link { @apply group flex items-center px-4 py-2 rounded-lg hover:bg-gray-700 cursor-pointer text-gray-200 transition-all duration-200; }
  .btn-nuevo-proyecto { @apply bg-gradient-to-r from-green-400 via-blue-500 to-purple-500 text-white px-6 py-2 rounded-full font-bold shadow-lg hover:scale-105 transform transition-all duration-300 flex items-center space-x-2; }
  .input-busqueda { @apply px-4 py-2 rounded-full bg-gray-800 text-gray-200 w-64 focus:outline-none focus:ring-2 focus:ring-green-400 shadow-inner transition-all duration-200; }
  .btn-editar { @apply px-3 py-1 bg-blue-600 rounded-md text-white hover:bg-blue-500 hover:scale-105 transform transition-all duration-200; }
  .btn-eliminar { @apply px-3 py-1 bg-red-600 rounded-md text-white hover:bg-red-500 hover:scale-105 transform transition-all duration-200; }
</style>
